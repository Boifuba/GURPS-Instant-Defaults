{"name":"Marks as Dead (splash)","permission":{"default":0,"fxJ7E4GhCZAfiQvi":3},"type":"script","flags":{"core":{"sourceId":"Macro.B29VhIrds0SgLHnh"},"importid":"DWhBIypbRs5GnMLp"},"scope":"global","command":"let params =\n    [{\n        filterType: \"splash\",\n        filterId: \"mySplash\",\n        color: 0x900505,\n        padding: 30,\n        time: Math.random()*1000,\n        seed: Math.random()/100,\n        splashFactor: 2,\n        spread: 7,\n        blend: 1,\n        dimX: 1,\n        dimY: 1,\n        cut: true,\n        textureAlphaBlend: false\n    }];\n\nTokenMagic.addUpdateFiltersOnSelected(params);","author":"fxJ7E4GhCZAfiQvi","img":"worlds/teste/adventures/Adventure_1622325284575/compendium/images/DWhBIypbRs5GnMLp/skull-hollow-beige.webp","actorIds":[],"_id":"8kuUizmdeUbGCMC8"}
{"name":"Select Multiple Targets","permission":{"default":0,"fxJ7E4GhCZAfiQvi":3},"type":"script","flags":{"core":{"sourceId":"Macro.YhpOFD7pdDjalADY"}},"scope":"global","command":"let tokenIds = canvas.tokens.controlled.map(t=> t.id)\ngame.user.updateTokenTargets(tokenIds);","author":"fxJ7E4GhCZAfiQvi","img":"icons/magic/defensive/illusion-evasion-echo-purple.webp","actorIds":[],"_id":"AwDQFHlbcDnYLixO"}
{"name":"Instant Status Default","permission":{"default":0,"GhxxpGeygEFlv0ZA":3},"type":"script","flags":{"core":{"sourceId":"Macro.yCRgLKjsIcFrEAbq"}},"scope":"global","command":"function tokenUpdate(data) {\n  canvas.tokens.controlled.map(token => token.update(data));\n}\n\n\n\nlet dialogEditor = new Dialog({\n  title: `Instant Status Defaults`,\n  content: `Choose your status!`,\n  buttons: {\n    reset: {\n      icon: \"<i class='fas fa-power-off'></i>\",\n      label: `Reset`,\n      callback: () => {\n        GURPS.executeOTF('/st clear')\n        dialogEditor.render(true);\n      }\n    },\n    step: {\n      icon: \"<i class='fas fa-shoe-prints'></i>\",\n      label: `Step`,\n      callback: () => {\n        GURPS.executeOTF('/st t sprint')\n        dialogEditor.render(true);\n      }\n    },\n    prepare: {\n      label: `Ready`,\n            icon: \"<i class='fas fa-hand-spock'></i>\",\n\n      callback: () => {\n        GURPS.executeOTF('/st t grapple')\n        dialogEditor.render(true);\n      }\n    },\n    stun: {\n      label: `Stun`,\n            icon: \"<i class='fas fa-star'></i>\",\n                  callback: () => {\n                  GURPS.executeOTF('/st t stun')\n\n    dialogEditor.render(true);\n      }\n    },\n    aim: {\n      label: `Aim`,\n            icon: \"<i class='fas fa-crosshairs'></i>\",\n\n      callback: () => {\n                  GURPS.executeOTF('/st t aim')\n        dialogEditor.render(true);\n      }\n    },\n    nodef: {\n      label: `Def`,\n            icon: \"<i class='fas fa-exclamation-circle'></i>\",\n\n      callback: () => {\n                            GURPS.executeOTF('/st t agony')\n\n        dialogEditor.render(true);\n      }\n    },\n   \n    fatigue: {\n      label: `FP`,\n            icon: \"<i class='fas fa-battery-quarter'></i>\",\n\n      callback: () => {\n                                      GURPS.executeOTF('/fp -1'),\n\n        dialogEditor.render(true);\n      }\n    },\n    close: {\n      icon: \"<i class='fas fa-tick'></i>\",\n      label: `Close`\n    },\n  },\n  default: \"close\",\n  close: () => {}\n});\n\ndialogEditor.render(true)","author":"GhxxpGeygEFlv0ZA","img":"systems/gurps/icons/blood-splatter-clipart-small.png","actorIds":[],"_id":"HGrCjpDGsTtxkYb1"}
{"name":"GURPS Instant Defaults","permission":{"default":0,"fxJ7E4GhCZAfiQvi":3},"type":"script","flags":{"core":{"sourceId":"Macro.0gNpnJ8ByjYB5Ww9"}},"scope":"global","command":"//Thanks to Codimu36 for the GUHE refactor here and Freeze for teach me the basic\n//Thanks for Chris Normand for the inspiration! \nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"I don't have a crystal ball, please select one token!\");\n\nlet dialogTemplate = `<style>\n                            \n                           \n                           #buttons-dialog .dialog-content { \n                                        text-align: center;\n                                        font-size: 20px;\n                                        padding-bottom: 8px;\n                                        padding-top: 8px; \n                                        font-family: \"Signika\";\n                                        Background-color: Orange;\n                                        border-radius: 15px;\n                                        Color:White;\n\n}\n                            #buttons-dialog .dialog-buttons { \n                                        margin: 0 auto;\n                                        width: 100%;\n                                        padding-top: 8px; \n                                        background-color: #00000;\n                                        background-size: 50px 50px;\n                                        background-repeat: no-repeat;\n                                        background-position: center;\n                                        width: 384px;\n                                        height: 90px;\n\n\n                                        \n                                        \n}\n                          #buttons-dialog .dialog-buttons .reset {\n                                       margin: 0 auto;\n                                        width: 100%;\n                                        border-radius: 15px;\n                                        background-color: #ffffff;\n                                        background-size: 90% 80%;\n                                        background-repeat: no-repeat;\n                                        background-position: center;\n\n\n                          \n                          }\n                          #buttons-dialog .dialog-buttons .step {\n                                        margin: 0 auto;\n                                        width: 100%;\n                                        border-radius: 15px;                                    \n                                        background-image: url(\"systems/gurps/icons/statuses/x-haste.png\");\n                                        background-color: #ffffff;\n                                        background-size: 90% 80%;\n                                        background-repeat: no-repeat;\n                                        background-position: center;\n                          }\n                          #buttons-dialog .dialog-buttons .prepare {\n                                        margin: 0 auto;\n                                        width: 100%;\n                                        border-radius: 15px;\n                                        background-image: url(\"systems/gurps/icons/statuses/path-condition-grappled.png\");\n                                        background-color: #ffffff;\n                                        background-size: 90% 80%;\n                                        background-repeat: no-repeat;\n                                        background-position: center;\n                          }\n                          #buttons-dialog .dialog-buttons .stun {\n                                        margin: 0 auto;\n                                        width: 100%;\n                                        border-radius: 15px;\n                                        background-image: url(\"systems/gurps/icons/statuses/dd-condition-stunned.png\");\n                                        background-color: #ffffff;\n                                        background-size: 90% 80%;\n                                        background-repeat: no-repeat;\n                                        background-position: center;\n                          }\n                          #buttons-dialog .dialog-buttons .nodef {\n                                        margin: 0 auto;\n                                        width: 100%;\n                                        border-radius: 15px;\n                                        background-image: url(\"systems/gurps/icons/statuses/path-condition-helpless.png\");\n                                        background-color: #ffffff;\n                                        background-size: 90% 80%;\n                                        background-repeat: no-repeat;\n                                        background-position: center;\n                          }\n                          #buttons-dialog .dialog-buttons .fp {\n                                        margin: 0 auto;\n                                        width: 100%;\n                                        border-radius: 15px;\n                                        background-image: url(\"systems/gurps/icons/statuses/x-drowsy.png\");\n                                        background-color: #ffffff;\n                                        background-size: 90% 80%;\n                                        background-repeat: no-repeat;\n                                        background-position: center;\n                          }\n                          #buttons-dialog .dialog-buttons .select {\n                                        margin: 0 auto;\n                                        width: 100%;\n                                        border-radius: 15px;\n                                        background-image: url(\"systems/gurps/icons/statuses/cth-condition-readied.png\");\n                                        background-color: #ffffff;\n                                        background-size: 90% 80%;\n                                        background-repeat: no-repeat;\n                                        background-position: center;\n                                       \n                                   \n                          }\n                          #buttons-dialog .dialog-buttons .stop {\n                                        margin: 0 auto;\n                                        width: 100%;\n                                        \n\n\n                                        \n                          }\n                          \n                         \n\n\n                          \n                    </style>\n`;\n\nvar input = [\n  {\n    title: 'reset',\n    name: 'Reset',\n    icon: 'power-off',\n    otf: '/st clear',\n    audio_src: 'reset.wav'\n \n  },\n  {\n    title: 'step',\n    name: '',\n    icon: '',\n    otf: '/st t sprint',\n    audio_src: 'pop.mp3'\n  },\n  {\n    title: 'prepare',\n    name: '',\n    icon: '',\n    otf: '/st t grapple',\n    audio_src: 'pop.mp3'\n  },\n  {\n    title: 'stun',\n    name: '',\n    icon: '',\n    otf: '/st t stun',\n    audio_src: 'pop.mp3'\n  },\n  {\n    title: 'nodef',\n    name: '',\n    icon: '',\n    otf: '/st t agony',\n    audio_src: 'pop.mp3'\n  },\n  {\n    title: 'fp',\n    name: '',\n    icon: '',\n    otf: '/fp -1',\n    audio_src: 'pop.mp3'\n  },\n  {\n    title: 'select',\n    name: '',\n    icon: '',\n    otf: '/:Select Multiple Targets',\n    audio_src: 'pop.mp3'\n  },\n\n]\n\nvar buttons = input.reduce((buttonObj, buttonData) => {\n    buttonObj[buttonData.title] = {\n      icon: `<i class='fas fa-${buttonData.icon}'></i>`,\n      label: buttonData.name,\n      callback: () => {\n        GURPS.executeOTF(buttonData.otf);\n        dialogEditor.render(true);\n        AudioHelper.play({\n          src: `modules/gurps-instant-defaults/packs/${buttonData.audio_src}`,\n          volume: 0.8,\n          autoplay: true,\n          loop: false,\n        }, true);\n      }\n    }\n  return buttonObj;\n}, {});\n\n//*buttons.stop = {\n//    label: \"Close\",\n//}\n\nlet dialogEditor = new Dialog({\n  title: `GURPS Instant Defaults`,\n  content: dialogTemplate + `Choose your status!` ,\n  buttons: buttons,\n//  default: \"close\",\n//  close: () => {}\n  \n  \n},\n{\n     id: \"buttons-dialog\",\n}\n);\n\n\n\ndialogEditor.render(true)","author":"fxJ7E4GhCZAfiQvi","img":"icons/sundries/flags/banner-flag-pirate-02.webp","actorIds":[],"_id":"UKKkuhVKaeBJCDTI"}
{"name":"Delete Dead Mark","permission":{"default":0,"fxJ7E4GhCZAfiQvi":3},"type":"script","flags":{"core":{"sourceId":"Macro.iaWtFGkX1tFZiyCm"},"importid":"Lglk9IEGKcXDcI71"},"scope":"global","command":"// Delete all filters on the selected tokens/tiles\nTokenMagic.deleteFiltersOnSelected();","author":"fxJ7E4GhCZAfiQvi","img":"icons/magic/death/bones-crossed-orange.webp","actorIds":[],"_id":"lpZaOcN7z0jvMkGV"}
{"name":"ReactionRoll","permission":{"default":0,"fxJ7E4GhCZAfiQvi":3},"type":"script","flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.BAVCAmeEE34jS0dN"},"importid":"SwxFagE3eJmQSiTu"},"scope":"global","command":"let r = new Roll(\"3d6 + @mod\", { mod: GURPS.ModifierBucket.currentSum()})\ngame.tables.getName(\"Reaction Rolls\").draw({roll:r})\nGURPS.ModifierBucket.clear()","author":"fxJ7E4GhCZAfiQvi","img":"worlds/teste/adventures/Adventure_1622325284575/compendium/images/SwxFagE3eJmQSiTu/dice-runed-brown.webp","actorIds":[],"_id":"oj3H8cc1pRACRs7Y"}
{"name":"Pull to Scene","permission":{"default":0,"fxJ7E4GhCZAfiQvi":3},"type":"script","flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.nLhsnfg0NvUXtGYP"},"importid":"KyXPZ7infLCcN9aL"},"scope":"global","command":"//Pull in lost tokens\nconst { width, height } = canvas.dimensions;\ncanvas.tokens.updateAll(light => {\n    const { x, y } = light.data;\n    return {\n        x: Math.clamped(x, 10, width - 10),\n        y: Math.clamped(y, 10, height - 10),\n    };\n});","author":"fxJ7E4GhCZAfiQvi","img":"icons/tools/laboratory/alembic-glass-ball-blue.webp","actorIds":[],"_id":"y72any1sxVQlW3mJ"}
