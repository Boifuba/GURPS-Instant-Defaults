{"name":"Falling Calculator","type":"script","author":"rKZhHff41sD8F8Yq","img":"icons/skills/movement/arrow-down-pink.webp","scope":"global","command":"const myContent = await renderTemplate(\"modules/gurps-instant-defaults/scripts/FallingCalculator.html\");\n\nnew Dialog({\n  title: \"Instant Falling Damage\",\n  content: myContent,\n  buttons: {}\n}).render(true);","folder":null,"sort":0,"permission":{"default":0,"rKZhHff41sD8F8Yq":3},"flags":{"core":{"sourceId":"Macro.edXnzxry3c8iIM2p"}},"_id":"HDQhk5z3fVch2rbh"}
{"name":"Sight Adjustment","type":"script","author":"pX25O5PLzpFvPyFD","img":"icons/skills/targeting/crosshair-arrowhead-blue.webp","scope":"global","command":"const updates = canvas.tokens.controlled.map(i => {\n  const dimSight = Number(i.document.data.dimSight);\n  const change = event.ctrlKey ? dimSight + 0.8 : event.altKey ? dimSight -1 : 0;\n  return {_id: i.id, dimSight: Math.max(change, 0)};\n});\nawait canvas.scene.updateEmbeddedDocuments(\"Token\", updates);","folder":null,"sort":0,"permission":{"default":0,"pX25O5PLzpFvPyFD":3},"flags":{"core":{"sourceId":"Macro.x4SKjhUyWSJeecrz"}},"_id":"HZ9Q0EPe0ljrdHEW"}
{"name":"Instant Defaults","type":"script","author":"pX25O5PLzpFvPyFD","img":"icons/sundries/flags/banner-yellow.webp","scope":"global","command":"InstantDefaults.skillChooser()","folder":null,"sort":0,"permission":{"default":0,"pX25O5PLzpFvPyFD":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.JDV9ZoJ2Q6vQUSql"}},"_id":"IpBzKHCFjXQerZsX"}
{"name":"ReactionRoll","type":"script","author":"pX25O5PLzpFvPyFD","img":"icons/environment/people/group.webp","scope":"global","command":"let r = new Roll(\"3d6 + @mod\", { mod: GURPS.ModifierBucket.currentSum()})\ngame.tables.getName(\"Reaction Rolls\").draw({roll:r})\nGURPS.ModifierBucket.clear()","folder":null,"sort":0,"permission":{"default":0,"fxJ7E4GhCZAfiQvi":3,"pX25O5PLzpFvPyFD":3},"flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.BAVCAmeEE34jS0dN"},"importid":"SwxFagE3eJmQSiTu"},"_id":"T4lat5EDOgrcJ3vP"}
{"name":"Healing Tool","type":"script","author":"pX25O5PLzpFvPyFD","img":"icons/magic/holy/chalice-glowing-gold-water.webp","scope":"global","command":"const targets = Array.from(game.user.targets);\n\n//MINOR HEALING\n\n\nfunction minorHealing(energy) {\n  if ((energy > 3)) {\n    ui.notifications.error(\"The value need to be equal or lower than 3\");\n    dialogEditor.render(true);\n        \n \n//  energy = Object.keys(energy).length === 0 {\n//       ui.notifications.error(\"Choose a value between 1-3\");\n      \n      \n\n    } else {\n      \n      \n      GURPS.executeOTF(`/r [/hp +${energy}  @target]`)\n      GURPS.executeOTF(`/r [/fp -${energy}]`)\n    }\n  }\n\n\n  //MAJOR HEALING\n\n\nfunction majorHealing(energy) {\n  if ((canvas.tokens.controlled[0] === 0 & Array.from(game.user.targets)[0] === 0)) {\n    ui.notifications.error(\"You need some energy to cast this spell!\");\n    dialogEditor.render(true);\n\n  } else {\n    let realHealing = energy * 2\n    targets.forEach((target) => {\n    GURPS.executeOTF(`/r [/hp +${realHealing}  @target]`)\n    GURPS.executeOTF(`/r [/fp -${energy}]`);\n    }\n    )};\n  \n\n}\n\n//GREATER HEALING\n\nfunction greaterHealing(energy) {\n\n  GURPS.executeOTF(`/r [/hp reset  @target]`)\n  GURPS.executeOTF(`/r [/fp -20]`)\n}\n\nlet dialogContent =\n` \n\n    <form>\n    <div class=\"form-group\">\n      <label>Fatigue Points:</label>\n      <input id=\"energy\" name=\"energy\" type=\"number\" value=\"1\" min=\"1\" max=\"20\">\n      </div>    \n`\n  ;\n\n//let applyChanges = false\nlet dialogButtons = {\n \n\n  minorHealing: {\n\n    label: `Minor Healing`,\n    callback: async (html) => minorHealing(html.find('#energy').val())\n  },\n  majorHealing: {\n\n    label: `Major Healing`,\n    callback: async (html) => majorHealing(html.find('#energy').val())\n  },\n  greaterHealing: {\n\n    label: `Greater Healing`,\n    callback: async (html) => greaterHealing(html.find('#energy').val())\n  }\n}\n\nlet dialogEditor = new Dialog({\n  title: `Instant Healings`,\n  content: dialogContent,\n  buttons: dialogButtons,\n  default: \"yes\",\n})\n\ndialogEditor.render(true);","folder":null,"sort":0,"permission":{"default":0,"pX25O5PLzpFvPyFD":3},"flags":{"core":{"sourceId":"Macro.npfhk5aF2sMZi0Cg"}},"_id":"TVFAD9kLLT3nl2QG"}
{"name":"Apply Manual Damage","type":"script","author":"pX25O5PLzpFvPyFD","img":"icons/skills/wounds/injury-pain-body-orange.webp","scope":"global","command":"function manualDamage(damage, type) {\n  GURPS.executeOTF(`/r [${damage} ${type}]`);\n}\nnew Dialog({\n  title: `Manual Damage`,\n  content: \n`<form>\n<style>\nform#form-group {\n  background-color: red;\n}\n</style>\n <form>\n      <div class=\"form-group\">\n        <label>Damage Type: </label>\n        <select id=\"damageType\" name=\"damageType\">\n          <option value=\"burn\">Burning</option>\n          <option value=\"cor\">Corrosion</option>\n          <option value=\"cr\">Crushing</option>\n          <option value=\"imp\">Impaling</option>\n          <option value=\"pi-\">Smal piercing</option>\n          <option value=\"pi\">Piercing</option>\n          <option value=\"pi+\">Large Piercing</option>\n          <option value=\"pi+\">Large Piercing</option>\n          <option value=\"pi++\">Huge Piercing</option>\n          <option value=\"tox\">Toxic</option>\n          <option value=\"sh\">Shield</option>\n             \n          \n          \n          </select>\n      </div>\n     \n  </form>  \n  \n  <form>\n<div class=\"form-group\">\n  <label>Damage Amount:</label>\n  <input id=\"damageAmount\" name=\"damageAmount\"  value=\"\" min=\"1\" max=\"20\">\n  </div>   \n  `,\n  buttons: {\n    confirm: {\n      label: \"Confirm\",\n      callback: async (html) => {\n        manualDamage(html.find('#damageAmount').val(), html.find('#damageType').val());\n      }\n    }\n  }\n}, {\n  width: 400\n}).render(true);","folder":null,"sort":0,"permission":{"default":0,"pX25O5PLzpFvPyFD":3},"flags":{"core":{"sourceId":"Macro.Bjf1SqGzABywtOTp"}},"_id":"cWucJTpypbC96DpL"}
{"name":"Journal Menu","type":"script","author":"pX25O5PLzpFvPyFD","img":"icons/tools/scribal/ink-quill-pink.webp","scope":"global","command":"const managerType = 'Journal Menu';\n\n(()=>{\n  const journals = [\n    \n    \"Vision\",\n    \"Escudo\"   \n\n  ];\n\n    let buttons = {}, dialog, content = `<div sytle=\"width:100%;text-align:center;><h2>Choose Journal</h2></div>`;\n  \n  \n  journals.forEach((str)=> {\n    let journal = game.journal.getName(str);\n    if(!journal) return;\n\n    buttons[str] = {\n      label : `\n        <div style=\"display:flex;flex-direction:row;justify-content:center;align-items:center;\">\n          \n        <div style=\"display:flex;justify-content:left;flex-grow:1;\">\n        \n          <source src=\"/sounds/pop.mp3\" type=\"audio/mpeg\">\n\n        <div style=\"display:flex;justify-content:left;flex-grow:1\"><label>${str}</label></div>\n        </div>`,\n      callback : () => {\n        game.journal.getName(str).sheet.render(true);\n       dialog.render(true);\n      }\n    }\n  });\n  dialog = new Dialog({title : `${managerType}`,content, buttons}).render(true);\n})();","folder":null,"sort":0,"permission":{"default":0,"pX25O5PLzpFvPyFD":3},"flags":{"core":{"sourceId":"Macro.2mBXApLhSAET8wtI"}},"_id":"fpm1y2KEbiCkJRSw"}
{"name":"Compendium Menu","type":"script","author":"pX25O5PLzpFvPyFD","img":"icons/sundries/books/book-embossed-blue.webp","scope":"global","command":"const managerType = 'Compendium Menu';\n\n(()=>{\n  const journals = [\n    \n    \"gurps-instant-defaults.GURPS4E-Basic-Set\" , \n    \"GURPS-Modifier-Tables.tables\",\n    \"gurps-instant-defaults.GURPS4E-Dungeon-Fantasy-RPG\",\n    \"GURPS RollTables\"\n   \n\n  ];\n\n  let path = 'icons/sundries/books/',\nfiles = [\n    'book-backed-silver-gold.webp', \n    'book-worn-brown-grey.webp',\n     'book-worn-blue.webp',\n      'book-symbol-canterbury-cross.webp',\n       'book-symbol-triangle-silver-purple.webp',\n        'book-tooled-silver-blue.webp',\n         'book-symbol-fire-gold-orange.webp',\n          'book-stack.webp',\n           'book-embossed-spiral-purple-white.webp',\n            'book-symbol-leaf-green.webp']\ni = Math.floor(Math.random()*files.length);\nlet imagem = (path+files[i]);\nconsole.log(imagem)\n\n    let buttons = {}, dialog, content = `<div sytle=\"width:100%;text-align:center;><h2>Choose Journal</h2></div>`;\n  \n  \n  journals.forEach((str)=> {\n    let journal = game.packs.get(str);\n    if(!journal) return;\n    const name = journal.metadata.label;\n\n    buttons[str] = {\n      label : `\n        <div style=\"display:flex;flex-direction:row;justify-content:center;align-items:center;\">\n          \n        <div style=\"display:flex;justify-content:left;flex-grow:1;\">\n        \n        <img src=\"${imagem}\" width=\"50\" height=\"50\" style=\"background-color:#5c5c5c;;border-radius: 10px;margin: 3px 3px 3px;\"/></div>\n\n        <div style=\"display:flex;justify-content:left;flex-grow:1\"><label>${name}</label></div>\n        </div>`,\n      callback : () => {\n        game.packs.get(str).render(true);\n       dialog.render(true);\n      }\n    }\n  });\n  dialog = new Dialog({title : `${managerType}`,content, buttons}).render(true);\n})();","folder":null,"sort":0,"permission":{"default":0,"pX25O5PLzpFvPyFD":3},"flags":{"core":{"sourceId":"Macro.qsWPXt5DBqz5Yis1"}},"_id":"gPfNLGhPZSb8ZK3I"}
{"name":"Rolltable manager","type":"script","author":"pX25O5PLzpFvPyFD","img":"systems/gurps/icons/die-new.png","scope":"global","command":"/*\n  GM Menu\n  \n  icons: icons/sundries/documents/document-writing-pink.webp\n  \n  Fill the constant macros with the names of your macros, when you click the button it will run the macro.\n\n  Dialog Window will not close until the X button is pressed.\n*/\nconst managerType = 'Gerenciador de Macros';\n\n(()=>{\n  const tables = [\n    \"Critical Hit\",\n    \"Critical Miss\",\n    \"Alterar Tamanho\",\n    \"Jogar Moeda\",\n    \"Aplicar Dano\",\n    \"Abrir Quest Log\",\n    \"Gerenciador de Iluminação\",\n    \"Gerenciado de Armas\",\n    \"Healing Tool\",\n    \"Critical Magic\"\n\n  ];\n\n    let buttons = {}, dialog, content = `<div sytle=\"width:100%;text-align:center;><h2>Choose Macro</h2></div>`;\n  \n  \n  tables.forEach((str)=> {\n    let table = game.tables.getName(str);\n    if(!table) return;\n\n    buttons[str] = {\n      label : `\n <div onMouseOut=\"this.style.background = '#000000'\">\n <div onMouseOver=\"this.style.background = '#fcfcfa'\">\n        \n        <div style=\"display:flex;flex-direction:row;justify-content:center;align-items:center;\">\n        <div style=\"display:flex;justify-content:left;flex-grow:1;\">\n        <img src=\"${table.data.img}\" width=\"50\" height=\"50\" style=\"background-color:#5c5c5c;;border-radius: 10px;margin: 3px 3px 3px;\"/></div> \n        <div style=\"display:flex;justify-content:left;flex-grow:1\"><label>${str}</label></div>\n        </div>\n        \n        \n </div>\n </div>       \n        \n        \n        `,\n      callback : () => {\n        game.tables.getName(str).draw();\n       dialog.render(true);\n      }\n    }\n  });\n  dialog = new Dialog({title : `${managerType}`,content, buttons}).render(true);\n})();\n\n\n\n\n// <div onMouseOut=\"this.style.background = '#476db3'\">\n// <div onMouseOutr=\"this.style.background = '#d929cd'\">","folder":null,"sort":0,"permission":{"default":0,"pX25O5PLzpFvPyFD":3},"flags":{"core":{"sourceId":"Macro.DduDsT4mP8rNr6g0"}},"_id":"nyIZ0xQ9HLSdzZsJ"}
{"name":"Sight Toggle","type":"script","author":"pX25O5PLzpFvPyFD","img":"icons/magic/perception/shadow-stealth-eyes-purple.webp","scope":"global","command":"ui.notifications.notify(token.name + \"Select your token again to update your vision \");\nawait token.document.update({sightAngle : token.document.data.sightAngle === 360 ? 275 : 360});\nawait canvas.scene.updateEmbeddedDocuments(\"Token\", updates);","folder":null,"sort":0,"permission":{"default":0,"pX25O5PLzpFvPyFD":3},"flags":{"core":{"sourceId":"Macro.kRKbNVaRiRhyjZOD"}},"_id":"u7rRaD8LiCBCgMCp"}
{"name":"Falling Calculator","type":"script","author":"rKZhHff41sD8F8Yq","img":"icons/skills/movement/arrow-down-pink.webp","scope":"global","command":"if (canvas.tokens.controlled.length === 0)\n  return ui.notifications.error(\"Select the falling token\");\n\n\n\nconst myContent = await renderTemplate(\"modules/myModule/templates/myTemplate.html\");\n\nnew Dialog({\n  title: \"GURPS Instant Falling Damage\",\n  content: myContent,\n  buttons: {}\n}).render(true);","folder":null,"sort":0,"permission":{"default":0,"rKZhHff41sD8F8Yq":3},"flags":{"core":{"sourceId":"Macro.edXnzxry3c8iIM2p"}},"_id":"DjSj7t4AayHuJzIg"}
